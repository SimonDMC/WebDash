(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[596],{2796:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/no",function(){return o(832)}])},7603:function(e,t,o){"use strict";o.d(t,{Z:function(){return c}});var n=o(5893),a=o(9008),r=o.n(a);function c(){return(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"WebDash"}),(0,n.jsx)("meta",{name:"description",content:"A Web Dashboard for your Minecraft server"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"}),(0,n.jsx)("meta",{name:"socket-port",content:"%WEBSOCKET_PORT%"}),(0,n.jsx)("link",{rel:"icon",href:"favicon.ico"}),(0,n.jsx)("link",{rel:"manifest",href:"manifest.json"})]})}},2390:function(e,t,o){"use strict";let n;o.r(t),o.d(t,{default:function(){return j},socket:function(){return n}});var a=o(5893),r=o(7294),c=o(4298),s=o.n(c),i=o(5152),l=o.n(i),u=o(1502),d=o.n(u);function m(e,t){let o=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),a=parseInt(e.substring(5,7),16),r=Math.round(t);return"#".concat(Math.min(255,o+r).toString(16)).concat(Math.min(255,n+r).toString(16)).concat(Math.min(255,a+r).toString(16))}var p=o(2030);let _=e=>{let{name:t,id:o,command:n,color:r,handleDrag:c,handleDrop:s,handleTouchMove:i}=e;function l(){let e=parseInt(r.substring(1),16);return(e>>16)*.299+(e>>8&255)*.587+(255&e)*.114>204}return(0,a.jsxs)("div",{className:"".concat(d().button," ").concat(l()?d().blackButton:d().whiteButton),id:o,draggable:"true",onDragStart:e=>c(e),onDragOver:e=>e.preventDefault(),onDrop:e=>s(e),onTouchStart:e=>c(e),onTouchMove:e=>i(e),onTouchEnd:e=>s(e),style:{backgroundColor:r,border:"0.1em solid ".concat(l()?m(r,-25.5):m(r,25.5))},onClick:async e=>{if(e.target.className.includes("fa-pen")){let a=document.querySelector(".popup.route-popup");a.classList.remove("fade-out"),a.classList.add("fade-in");let c=document.querySelector(".popup.route-popup .name");c.value=t;let s=document.querySelector(".popup.route-popup .command");s.value=n;let i=document.querySelector(".popup.route-popup .color");i.value=r;let l=document.querySelector(".popup.route-popup .id");l.innerHTML=o;let u=document.querySelector(".popup.route-popup .save");u.innerHTML="Save";return}if(e.target.className.includes("fa-trash-can")){(0,p.l)("delete",o);return}e.target.className.includes("buttonControls")||(0,p.l)("press",o)},children:[(0,a.jsx)("p",{className:d().buttonName,children:t}),(0,a.jsx)("p",{className:"".concat(d().buttonCommand," ").concat(l()?d().darkCommand:d().lightCommand),children:n}),(0,a.jsxs)("div",{className:d().buttonControls,style:{backgroundColor:l()?m(r,-38.25):m(r,38.25)},children:[(0,a.jsx)("i",{className:"fa-solid fa-pen"}),(0,a.jsx)("i",{className:"fa-regular fa-trash-can"})]})]})},f=()=>(0,a.jsx)("div",{className:d().addButton,onClick:()=>{let e=document.querySelector(".popup.route-popup");e.classList.remove("fade-out"),e.classList.add("fade-in");let t=document.querySelector(".popup.route-popup .name");t.value="";let o=document.querySelector(".popup.route-popup .command");o.value="";let n=document.querySelector(".popup.route-popup .color");n.value="#5781af";let a=document.querySelector(".popup.route-popup .save");a.innerHTML="Add"},children:(0,a.jsx)("div",{className:d().addButtonPlus,children:"+"})});var h=o(7603);function x(){let e=localStorage.getItem("zoomLevel");return null!==e?parseFloat(e):10}function v(e){localStorage.setItem("zoomLevel",e.toString())}let b=e=>{let{rerender:t}=e;function o(){v(Math.min(x()+1,15)),t()}function n(){v(Math.max(x()-1,4)),t()}let c=e=>{e.ctrlKey&&(e.preventDefault(),e.stopPropagation(),e.deltaY>0?n():o())};return document.addEventListener("wheel",c,{passive:!1}),(0,r.useEffect)(()=>()=>{document.removeEventListener("wheel",c)}),(0,a.jsxs)("div",{className:d().zoomButtons,children:[(0,a.jsx)("div",{className:d().zoomButton,onClick:o,children:"+"}),(0,a.jsx)("div",{className:d().zoomDivider}),(0,a.jsx)("div",{className:d().zoomButton,onClick:n,children:"-"})]})},g=!1,y=l()(()=>o.e(691).then(o.bind(o,691)),{loadableGenerated:{webpack:()=>[691]},ssr:!1});function j(){let[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{(n=new WebSocket((0,p.w)())).onopen=()=>{let e=new URLSearchParams(window.location.search).get("key");e&&(0,p.l)("auth",e)},n.onmessage=e=>{let o=JSON.parse(e.data);t(o.buttons),g=!0},n.onclose=()=>{window.location.reload()}},[]);let[o,c]=(0,r.useState)(""),i=e=>{c(e.currentTarget.id)},[l,u]=(0,r.useState)(""),m=e=>{let t=e.targetTouches[0],o=document.elementFromPoint(t.clientX,t.clientY);o instanceof HTMLDivElement&&u(o.id)},v=n=>{let a=e.find(e=>e.id===o),r=n.nativeEvent instanceof MouseEvent?n.currentTarget.id:l,c=e.find(e=>e.id===r);if(!a||!c)return;let s=a.index,i=c.index;(0,p.l)("drag","".concat(s,"\xa7\xa7\xa7").concat(i));let u=[...e],d=u.find(e=>e.id===o);if(s<i)for(let m=s+1;m<=i;m++)u.find(e=>e.index===m).index--;else for(let _=s-1;_>=i;_--)u.find(e=>e.index===_).index++;d.index=i,t(u)},[j,w]=(0,r.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{}),(0,a.jsx)(y,{}),(0,a.jsx)(s(),{src:"https://kit.fontawesome.com/c7b17cb045.js",crossOrigin:"anonymous"}),(0,a.jsxs)("main",{className:d().main,children:[(0,a.jsx)("h1",{className:d().title,onDoubleClick:function(){let e=document.documentElement;j?document.exitFullscreen():e.requestFullscreen(),w(!j)},children:"WebDash"}),(0,a.jsxs)("div",{className:d().mainBoxWrapper,children:[(0,a.jsx)("div",{className:d().zoomOverlay,children:(0,a.jsx)(b,{rerender:function(){t([...e])}})}),(0,a.jsx)("div",{className:g?d().mainBox:d().mainBoxLoading,children:(0,a.jsxs)("div",{className:d().buttonWrapper,style:{fontSize:"".concat(x()/10,"em")},children:[[...e].sort((e,t)=>e.index-t.index).map(e=>(0,a.jsx)(_,{name:e.name,id:e.id,command:e.command,color:e.color,handleDrag:i,handleDrop:v,handleTouchMove:m},e.id)),(0,a.jsx)(f,{})]})})]}),(0,a.jsx)("a",{className:d().credit,href:"https://simondmc.com",target:"_blank",rel:"noopener noreferrer",children:"Made by SimonDMC"})]})]})}},832:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return u}});var n=o(5893),a=o(1502),r=o.n(a),c=o(5331),s=o(7603),i=o(7294),l=o(2030);function u(){return(0,i.useEffect)(()=>{let e=new WebSocket((0,l.w)());e.onclose=()=>{window.location.reload()}},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Z,{}),(0,n.jsxs)("main",{className:r().main,children:[(0,n.jsxs)("p",{className:r().unauthorized,children:["This dashboard is key-protected. To view it, run"," ",(0,n.jsx)("span",{className:r().copyCode,onClick:c.J,children:"/webdash\xa0link"})," ","in-game."]}),(0,n.jsx)("p",{className:r().copiedPopup,id:"copied-popup",children:"Copied!"})]})]})}},5331:function(e,t,o){"use strict";function n(e){let t=e.currentTarget,o=document.getElementById("copied-popup");if(o){navigator.clipboard.writeText(t.innerHTML.replace(/&nbsp;/g," "));let n=t.getBoundingClientRect();o.style.top="".concat(n.top,"px"),o.style.left="".concat(n.left,"px"),o.style.width="".concat(n.right-n.left,"px"),o.style.height="".concat(n.bottom-n.top,"px"),o.style.display="block",setTimeout(()=>{o.style.transform="translate(0, -1.1em)",setTimeout(()=>{o.style.opacity="0",setTimeout(()=>{o.style.transform="translate(0, 0)",o.style.opacity="1",o.style.display="none"},300)},800)},1)}}o.d(t,{J:function(){return n}})},2030:function(e,t,o){"use strict";o.d(t,{l:function(){return a},w:function(){return r}});var n=o(2390);function a(e,t){n.socket.send("".concat(e,"\xa7\xa7\xa7").concat(t))}function r(){let e=document.querySelector("meta[name='socket-port']"),t=window.location.hostname,o="ws://".concat(t,":").concat(null==e?void 0:e.getAttribute("content"));return o}},1502:function(e){e.exports={main:"Home_main__nLjiQ",title:"Home_title__T09hD",credit:"Home_credit__blqUx",mainBoxWrapper:"Home_mainBoxWrapper__k5GdT",zoomOverlay:"Home_zoomOverlay__oxDw_",mainBox:"Home_mainBox__knyAQ",mainBoxLoading:"Home_mainBoxLoading__DoC6G",buttonWrapper:"Home_buttonWrapper__PAlwI",button:"Home_button__Zs7A2",whiteButton:"Home_whiteButton__c6nsq",blackButton:"Home_blackButton__9Ps_4",buttonControls:"Home_buttonControls__hkjJx",buttonName:"Home_buttonName__QB3_v",buttonCommand:"Home_buttonCommand__UsBHA",lightCommand:"Home_lightCommand__yCtJY",darkCommand:"Home_darkCommand__b5_n5",addButton:"Home_addButton__BgLWv",addButtonPlus:"Home_addButtonPlus__Y9sVA",zoomButtons:"Home_zoomButtons__6a_O2",zoomButton:"Home_zoomButton__U8KAg",zoomDivider:"Home_zoomDivider__mlLZo",unauthorized:"Home_unauthorized__uBXup",dashboardOff:"Home_dashboardOff___H21X",copyCode:"Home_copyCode__eY8J3",copiedPopup:"Home_copiedPopup__kTwlZ"}},9008:function(e,t,o){e.exports=o(3121)},4298:function(e,t,o){e.exports=o(3573)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=2796)}),_N_E=e.O()}]);