(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(2390)}])},7603:function(e,t,o){"use strict";o.d(t,{Z:function(){return c}});var n=o(5893),a=o(9008),r=o.n(a);function c(){return(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"WebDash"}),(0,n.jsx)("meta",{name:"description",content:"A Web Dashboard for your Minecraft server"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"}),(0,n.jsx)("meta",{name:"socket-port",content:"%WEBSOCKET_PORT%"}),(0,n.jsx)("link",{rel:"icon",href:"https://simondmc.com/media/webdash-favicon.png"})]})}},2390:function(e,t,o){"use strict";let n;o.r(t),o.d(t,{default:function(){return k},key:function(){return g},socket:function(){return n}});var a=o(5893),r=o(7294),c=o(4298),s=o.n(c),u=o(5152),i=o.n(u),l=o(1502),d=o.n(l);function m(e,t){let o=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),a=parseInt(e.substring(5,7),16),r=Math.round(t);return"#".concat(Math.min(255,o+r).toString(16)).concat(Math.min(255,n+r).toString(16)).concat(Math.min(255,a+r).toString(16))}var p=o(2030);let _=e=>{let{name:t,id:o,command:n,color:r,handleDrag:c,handleDrop:s,handleTouchMove:u}=e;function i(){let e=parseInt(r.substring(1),16);return(e>>16)*.299+(e>>8&255)*.587+(255&e)*.114>204}return(0,a.jsxs)("div",{className:"".concat(d().button," ").concat(i()?d().blackButton:d().whiteButton),id:o,draggable:"true",onDragStart:e=>c(e),onDragOver:e=>e.preventDefault(),onDrop:e=>s(e),onTouchStart:e=>c(e),onTouchMove:e=>u(e),onTouchEnd:e=>s(e),style:{backgroundColor:r,border:"0.1em solid ".concat(i()?m(r,-25.5):m(r,25.5))},onClick:async e=>{if(e.target.className.includes("fa-pen")){let a=document.querySelector(".popup.route-popup");a.classList.remove("fade-out"),a.classList.add("fade-in");let c=document.querySelector(".popup.route-popup .name");c.value=t;let s=document.querySelector(".popup.route-popup .command");s.value=n;let u=document.querySelector(".popup.route-popup .color");u.value=r;let i=document.querySelector(".popup.route-popup .id");i.innerHTML=o;let l=document.querySelector(".popup.route-popup .save");l.innerHTML="Save";return}if(e.target.className.includes("fa-trash-can")){(0,p.l)("delete",o);return}e.target.className.includes("buttonControls")||(0,p.l)("press",o)},children:[(0,a.jsx)("p",{className:d().buttonName,children:t}),(0,a.jsx)("p",{className:"".concat(d().buttonCommand," ").concat(i()?d().darkCommand:d().lightCommand),children:n}),(0,a.jsxs)("div",{className:d().buttonControls,style:{backgroundColor:i()?m(r,-38.25):m(r,38.25)},children:[(0,a.jsx)("i",{className:"fa-solid fa-pen"}),(0,a.jsx)("i",{className:"fa-regular fa-trash-can"})]})]})},f=()=>(0,a.jsx)("div",{className:d().addButton,onClick:()=>{let e=document.querySelector(".popup.route-popup");e.classList.remove("fade-out"),e.classList.add("fade-in");let t=document.querySelector(".popup.route-popup .name");t.value="";let o=document.querySelector(".popup.route-popup .command");o.value="";let n=document.querySelector(".popup.route-popup .color");n.value="#5781af";let a=document.querySelector(".popup.route-popup .save");a.innerHTML="Add"},children:(0,a.jsx)("div",{className:d().addButtonPlus,children:"+"})});var h=o(7603);function x(){let e=localStorage.getItem("zoomLevel");return null!==e?parseFloat(e):10}function v(e){localStorage.setItem("zoomLevel",e.toString())}let b=e=>{let{rerender:t}=e;function o(){v(Math.min(x()+1,15)),t()}function n(){v(Math.max(x()-1,4)),t()}let c=e=>{e.ctrlKey&&(e.preventDefault(),e.stopPropagation(),e.deltaY>0?n():o())};return document.addEventListener("wheel",c,{passive:!1}),(0,r.useEffect)(()=>()=>{document.removeEventListener("wheel",c)}),(0,a.jsxs)("div",{className:d().zoomButtons,children:[(0,a.jsx)("div",{className:d().zoomButton,onClick:o,children:"+"}),(0,a.jsx)("div",{className:d().zoomDivider}),(0,a.jsx)("div",{className:d().zoomButton,onClick:n,children:"-"})]})},g="",j=i()(()=>o.e(691).then(o.bind(o,691)),{loadableGenerated:{webpack:()=>[691]},ssr:!1});function k(){let[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{let e=document.querySelector("meta[name='socket-port']"),o=window.location.hostname,a="ws://".concat(o,":").concat(null==e?void 0:e.getAttribute("content"));(n=new WebSocket(a)).onmessage=e=>{let o=JSON.parse(e.data);t(o.buttons)},n.onclose=()=>{window.location.reload()}},[]);let[o,c]=(0,r.useState)(""),u=e=>{c(e.currentTarget.id)},[i,l]=(0,r.useState)(""),m=e=>{let t=e.targetTouches[0],o=document.elementFromPoint(t.clientX,t.clientY);o instanceof HTMLDivElement&&l(o.id)},v=n=>{let a=e.find(e=>e.id===o),r=n.nativeEvent instanceof MouseEvent?n.currentTarget.id:i,c=e.find(e=>e.id===r);if(!a||!c)return;let s=a.index,u=c.index;(0,p.l)("drag","".concat(s,"\xa7\xa7\xa7").concat(u));let l=[...e],d=l.find(e=>e.id===o);if(s<u)for(let m=s+1;m<=u;m++)l.find(e=>e.index===m).index--;else for(let _=s-1;_>=u;_--)l.find(e=>e.index===_).index++;d.index=u,t(l)},[g,k]=(0,r.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{}),(0,a.jsx)(j,{}),(0,a.jsx)(s(),{src:"https://kit.fontawesome.com/c7b17cb045.js",crossOrigin:"anonymous"}),(0,a.jsxs)("main",{className:d().main,children:[(0,a.jsx)("h1",{className:d().title,onDoubleClick:function(){let e=document.documentElement;g?document.exitFullscreen():e.requestFullscreen(),k(!g)},children:"WebDash"}),(0,a.jsxs)("div",{className:d().mainBoxWrapper,children:[(0,a.jsx)("div",{className:d().zoomOverlay,children:(0,a.jsx)(b,{rerender:function(){t([...e])}})}),(0,a.jsx)("div",{className:d().mainBox,children:(0,a.jsxs)("div",{className:d().buttonWrapper,style:{fontSize:"".concat(x()/10,"em")},children:[[...e].sort((e,t)=>e.index-t.index).map(e=>(0,a.jsx)(_,{name:e.name,id:e.id,command:e.command,color:e.color,handleDrag:u,handleDrop:v,handleTouchMove:m},e.id)),(0,a.jsx)(f,{})]})})]}),(0,a.jsx)("a",{className:d().credit,href:"https://simondmc.com",target:"_blank",rel:"noopener noreferrer",children:"Made by SimonDMC"})]})]})}},2030:function(e,t,o){"use strict";o.d(t,{l:function(){return a}});var n=o(2390);function a(e,t){n.socket.send("".concat(e,"\xa7\xa7\xa7").concat(t))}},1502:function(e){e.exports={main:"Home_main__nLjiQ",title:"Home_title__T09hD",credit:"Home_credit__blqUx",mainBoxWrapper:"Home_mainBoxWrapper__k5GdT",zoomOverlay:"Home_zoomOverlay__oxDw_",mainBox:"Home_mainBox__knyAQ",buttonWrapper:"Home_buttonWrapper__PAlwI",button:"Home_button__Zs7A2",whiteButton:"Home_whiteButton__c6nsq",blackButton:"Home_blackButton__9Ps_4",buttonControls:"Home_buttonControls__hkjJx",buttonName:"Home_buttonName__QB3_v",buttonCommand:"Home_buttonCommand__UsBHA",lightCommand:"Home_lightCommand__yCtJY",darkCommand:"Home_darkCommand__b5_n5",addButton:"Home_addButton__BgLWv",addButtonPlus:"Home_addButtonPlus__Y9sVA",zoomButtons:"Home_zoomButtons__6a_O2",zoomButton:"Home_zoomButton__U8KAg",zoomDivider:"Home_zoomDivider__mlLZo",unauthorized:"Home_unauthorized__uBXup",dashboardOff:"Home_dashboardOff___H21X",copyCode:"Home_copyCode__eY8J3",copiedPopup:"Home_copiedPopup__kTwlZ"}},9008:function(e,t,o){e.exports=o(3121)},4298:function(e,t,o){e.exports=o(3573)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);